<?xml version="1.0" encoding="UTF-8"?>

<Configuration>

	<RepositoryList>

		<Repository name="SoftHSM">
			<Module>@pkcs11_softhsm_module@</Module>
			<TokenLabel>OpenDNSSEC</TokenLabel>
			<PIN>1234</PIN>
			<SkipPublicKey/>
			<!--
			<AllowExtraction/>
			-->
		</Repository>

<!--
		<Repository name="sca6000">
			<Module>@pkcs11_sca6000_module@</Module>
			<TokenLabel>Sun Metaslot</TokenLabel>
			<PIN>test:1234</PIN>
			<Capacity>255</Capacity>
			<RequireBackup/>
			<SkipPublicKey/>
		</Repository>
-->

	</RepositoryList>

	<Common>
		<Logging>
			<!-- Command line verbosity will overwrite configure file -->
			<Verbosity>3</Verbosity>
			<!-- Choose either Syslog or File for output, but not both -->
			<Syslog><Facility>local0</Facility></Syslog>
			<!-- <File><Filename>/var/log/opendnssec.log</Filename></File> -->
		</Logging>
		
		<PolicyFile>@OPENDNSSEC_CONFIG_DIR@/kasp.xml</PolicyFile>
		<ZoneListFile>@OPENDNSSEC_CONFIG_DIR@/zonelist.xml</ZoneListFile>
	</Common>

	<Enforcer>
<?xmlif if condition privdrop="user|group|both"?>		<Privileges>
<?xmlif fi?><?xmlif if condition privdrop="user|both"?>			<User>@INSTALLATIONUSER@</User>
<?xmlif fi?><?xmlif if condition privdrop="group|both"?>			<Group>@INSTALLATIONGROUP@</Group>
<?xmlif fi?><?xmlif if condition privdrop="user|group|both"?>		</Privileges><?xmlif fi?>

		<Datastore><SQLite>@OPENDNSSEC_STATE_DIR@/kasp.db</SQLite></Datastore>
		<!-- <ManualKeyGeneration/> -->
		<AutomaticKeyGenerationPeriod>P1Y</AutomaticKeyGenerationPeriod>
		<!-- <RolloverNotification>P14D</RolloverNotification> -->
		
		<!-- the <DelegationSignerSubmitCommand> will get all current
		     DNSKEYs (as a RRset) on standard input (with optional CKA_ID) -->
		<!-- <DelegationSignerSubmitCommand>@OPENDNSSEC_SBIN_DIR@/simple-dnskey-mailer.sh</DelegationSignerSubmitCommand> -->

		<WorkingDirectory>@OPENDNSSEC_STATE_DIR@/enforcer</WorkingDirectory>

		<!--<WorkerThreads>4</WorkerThreads>-->
	</Enforcer>

	<Signer>
<?xmlif if condition privdrop="user|group|both"?>		<Privileges>
<?xmlif fi?><?xmlif if condition privdrop="user|both"?>			<User>@INSTALLATIONUSER@</User>
<?xmlif fi?><?xmlif if condition privdrop="group|both"?>			<Group>@INSTALLATIONGROUP@</Group>
<?xmlif fi?><?xmlif if condition privdrop="user|group|both"?>		</Privileges><?xmlif fi?>

		<WorkingDirectory>@OPENDNSSEC_STATE_DIR@/signer</WorkingDirectory>
		<WorkerThreads>4</WorkerThreads>
<!--
		<SignerThreads>4</SignerThreads>
-->

<!-- Multiple interfaces can be specified in the <Listener> section. OpenDNSSEC
     will bind() to the first interface. I.e. outgoing packets will have the
     source address of the first mentioned interface. -->
<!--
		<Listener>
			<Interface><Port>53</Port></Interface>
		</Listener>
-->

		<!-- the <NotifyCommmand> will expand the following variables:

		     %zone      the name of the zone that was signed
		     %zonefile  the filename of the signed zone
		-->
<!--
		<NotifyCommand>/usr/local/bin/my_nameserver_reload_command</NotifyCommand>
-->
<!--
		<NotifyCommand>/usr/sbin/rndc reload %zone</NotifyCommand>
-->
	</Signer>

</Configuration>
