MAINTAINERCLEANFILES = $(srcdir)/Makefile.in

EXTRA_DIST = 

CLEANFILES = $(BUILT_SOURCES)

LIBHSM = ${top_builddir}/libhsm/src/lib/libhsm.a
LIBCOMPAT = ${top_builddir}/common/libcompat.a

SUBDIRS = test

AM_CFLAGS = \
	-I$(top_srcdir)/common \
	-I$(top_builddir)/common \
	-I$(srcdir)/../../libhsm/src/lib \
	-I$(builddir)/../../libhsm/src/lib \
	@XML2_INCLUDES@ \
	@LDNS_INCLUDES@

enforcerdir =	@libdir@/opendnssec/enforcer

bin_PROGRAMS = ods-kaspcheck
sbin_PROGRAMS =	ods-enforcerd ods-enforcer
#dist_man1_MANS = utils/ods-kaspcheck.1

ods_enforcerd_SOURCES = \
	ods-enforcerd.c \
	daemon/enforcercommands.c daemon/enforcercommands.h \
	daemon/engine.c daemon/engine.h \
	daemon/help_cmd.c daemon/help_cmd.h \
	daemon/time_leap_cmd.c daemon/time_leap_cmd.h \
	daemon/queue_cmd.c daemon/queue_cmd.h \
	daemon/verbosity_cmd.c daemon/verbosity_cmd.h \
	daemon/ctrl_cmd.c daemon/ctrl_cmd.h \
	policy/policy_export_cmd.c policy/policy_export_cmd.h \
	policy/policy_purge_cmd.c policy/policy_purge_cmd.h \
	policy/policy_export.c policy/policy_export.h \
	policy/policy_import.c policy/policy_import.h \
	policy/policy_import_cmd.c policy/policy_import_cmd.h \
	policy/policy_list_cmd.c policy/policy_list_cmd.h \
	policy/policy_resalt_cmd.c policy/policy_resalt_cmd.h \
	policy/policy_resalt_task.c policy/policy_resalt_task.h \
	hsmkey/backup_hsmkeys_cmd.c hsmkey/backup_hsmkeys_cmd.h \
	hsmkey/hsm_key_factory.c hsmkey/hsm_key_factory.h \
	hsmkey/key_generate_cmd.c hsmkey/key_generate_cmd.h \
	hsmkey/hsmkey_list_cmd.c hsmkey/hsmkey_list_cmd.h \
	keystate/zone_list_cmd.c keystate/zone_list_cmd.h \
	keystate/zone_add_cmd.c keystate/zone_add_cmd.h \
	keystate/zone_del_cmd.c keystate/zone_del_cmd.h \
	keystate/zone_set_policy_cmd.c keystate/zone_set_policy_cmd.h \
	keystate/keystate_list_cmd.c keystate/keystate_list_cmd.h \
	keystate/rollover_list_cmd.c keystate/rollover_list_cmd.h \
	keystate/keystate_export_cmd.c keystate/keystate_export_cmd.h \
	keystate/keystate_import_cmd.c keystate/keystate_import_cmd.h \
	keystate/keystate_ds_submit_cmd.c keystate/keystate_ds_submit_cmd.h \
	keystate/keystate_ds_submit_task.c keystate/keystate_ds_submit_cmd.h \
	keystate/keystate_ds_seen_cmd.c keystate/keystate_ds_seen_cmd.h \
	keystate/keystate_ds_retract_cmd.c keystate/keystate_ds_retract_cmd.h \
	keystate/keystate_ds_retract_task.c keystate/keystate_ds_retract_task.h \
	keystate/keystate_ds.c keystate/keystate_ds.h \
	keystate/keystate_ds_gone_cmd.c keystate/keystate_ds_gone_cmd.h \
	keystate/keystate_rollover_cmd.c keystate/keystate_rollover_cmd.h \
	keystate/key_purge_cmd.c keystate/key_purge_cmd.h \
	keystate/key_purge.c keystate/key_purge.h \
	keystate/zonelist_import.c keystate/zonelist_import.h \
	keystate/zonelist_import_cmd.c keystate/zonelist_import_cmd.h \
	keystate/zonelist_export.c keystate/zonelist_export.h \
	keystate/zonelist_export_cmd.c keystate/zonelist_export_cmd.h \
	keystate/zonelist_update.c keystate/zonelist_update.h \
	keystate/keystate_ds_submit_task.h \
	signconf/signconf_cmd.c signconf/signconf_cmd.h \
	signconf/signconf_task.c signconf/signconf_task.h \
	signconf/signconf_xml.c signconf/signconf_xml.h \
	enforcer/autostart_cmd.c enforcer/autostart_cmd.h \
	enforcer/enforce_cmd.c enforcer/enforce_cmd.h \
	enforcer/enforce_task.c enforcer/enforce_task.h \
	enforcer/enforcer.c enforcer/enforcer.h \
	enforcer/update_repositorylist_cmd.c enforcer/update_repositorylist_cmd.h \
	enforcer/repositorylist_cmd.c enforcer/repositorylist_cmd.h \
	enforcer/update_all_cmd.c enforcer/update_all_cmd.h \
	enforcer/update_conf_cmd.c enforcer/update_conf_cmd.h \
	enforcer/lookahead_cmd.c enforcer/lookahead_cmd.h \
	utils/kc_helper.c utils/kc_helper.h \
	db/dbw.c db/dbw.h

ods_enforcerd_LDADD = \
	$(LIBHSM) \
	$(LIBCOMPAT) \
	@LDNS_LIBS@ \
	@XML2_LIBS@ \
	@PTHREAD_LIBS@ \
	@RT_LIBS@

ods_enforcer_SOURCES = \
	ods-enforcer.c

ods_enforcer_LDADD = \
	$(LIBHSM) \
	$(LIBCOMPAT) \
	@LDNS_LIBS@ \
	@XML2_LIBS@ \
	@READLINE_LIBS@

ods_kaspcheck_SOURCES = utils/kaspcheck.c utils/kc_helper.c utils/kc_helper.h

ods_kaspcheck_LDADD = $(LIBHSM) $(LIBCOMPAT)
ods_kaspcheck_LDADD += @XML2_LIBS@
